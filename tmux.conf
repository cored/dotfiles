unbind C-b
set -g prefix C-s
bind-key -r C-s send-prefix

# Shell
set-option -g default-shell /bin/zsh

bind-key r source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded"

bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

set-option -g default-terminal "screen-256color"
# set-option -ga terminal-overrides ",xterm-256color:Tc"
set-option -g status-keys "emacs"

bind-key - split-window -v  -c '#{pane_current_path}'
bind-key \ split-window -h  -c '#{pane_current_path}'

# Fine adjustment (1 or 2 cursor cells per bump)
bind -n S-Left resize-pane -L 2
bind -n S-Right resize-pane -R 2
bind -n S-Down resize-pane -D 1
bind -n S-Up resize-pane -U 1

# Coarse adjustment (5 or 10 cursor cells per bump)
bind -n C-Left resize-pane -L 10
bind -n C-Right resize-pane -R 10
bind -n C-Down resize-pane -D 5
bind -n C-Up resize-pane -U 5

bind c new-window -c "#{pane_current_path}"
set -g base-index 1
set -g renumber-windows on

# breaks a panel into it's own window
bind-key b break-pane -d
bind-key C-b send-keys 'tat & exit' 'C-m'

# Use vim keybindings in copy mode
setw -g mode-keys vi

# kill the session
bind-key K run-shell 'tmux switch-client -n \; kill-session -t "$(tmux display-message -p "#S")" || tmux kill-session'

# " windowlist -b
unbind '"'
bind '"' choose-window

bind C-j split-window -v "tmux list-sessions | sed -E 's/:.*$//' | grep -v \"^$(tmux display-message -p '#S')\$\" | fzf --reverse | xargs tmux switch-client -t"

# Prompted join-pane
bind-key m command-prompt -p "join pane from: "  "join-pane -h -s '%%'"

# Goodies
bind-key p split-window -h -c . "heroku run rails c -p production"

# Setup 'v' to begin selection as in Vim
# bind-key -t vi-copy 'v' begin-selection

# bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# Update default binding of `Enter` to also use copy-pipe
# unbind -t vi-copy Enter
# bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"

# # Prefer prefix keybinding
# unbind C-b
# set -g prefix C-s

# # Vim Navigation

# # Improve colors
#


# # screen ^C c
# unbind ^C
# bind ^C new-window
# unbind c
# bind c new-window

# # detach ^D d
# unbind ^D
# bind ^D detach

# # displays *
# unbind *
# bind * list-clients

# # next ^@ ^N sp n
# unbind ^@
# bind ^@ next-window
# unbind ^N
# bind ^N next-window
# unbind " "
# bind " " next-window
# unbind n
# bind n next-window

# # title A
# unbind A
# bind A command-prompt "rename-window %%"

# # other ^A
# unbind ^A
# bind ^A last-window

# # prev ^H ^P p ^?
# unbind ^H
# bind ^H previous-window
# unbind ^P
# bind ^P previous-window
# unbind p
# bind p previous-window
# unbind BSpace
# bind BSpace previous-window

# # windows ^W w
# unbind ^W
# bind ^W list-windows
# unbind w
# bind w list-windows

# # quit \
# unbind '\'
# bind '\' confirm-before "kill-server"

# # kill K k
# unbind K
# bind K confirm-before "kill-window"
# unbind k
# bind k confirm-before "kill-window"

# # redisplay ^L l
# unbind ^L
# bind ^L refresh-client
# unbind l
# bind l refresh-client

# # split -v |
# unbind |
# bind | split-window

# # :kB: focus up
# unbind Tab
# bind Tab select-pane -t:.+
# unbind BTab
# bind BTab select-pane -t:.-


# #### COLOUR (Solarized dark) from https://github.com/kuroir/dotfiles.git

# default statusbar colors
set-option -g status-bg black #base02
set-option -g status-fg yellow #yellow
set-option -g status-attr default

# default window title colors
set-window-option -g window-status-fg brightblue #base0
set-window-option -g window-status-bg default
set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-fg brightred #orange
set-window-option -g window-status-current-bg default
set-window-option -g window-status-current-attr bright

# pane border
set-option -g pane-border-fg black #base02
set-option -g pane-active-border-fg brightgreen #base01

# message text
set-option -g message-bg black #base02
set-option -g message-fg brightred #orange

# pane number display
set-option -g display-panes-active-colour blue #blue
set-option -g display-panes-colour brightred #orange

set-option -g history-limit 10000

# clock
set-window-option -g clock-mode-colour green #green

# status bar extracted from ->
# http://calummacrae.blogspot.co.uk/2012/12/dropping-status-bars-for-tmux-as-im.html#more
# Info on right
set -g status-right-length 60
set -g status-right '#[fg=brightblue] #[fg=brightyellow]vol: #(sh  ~/.tmux/scripts/volume.sh) | #[fg=black] #[fg=brightred]#(sh ~/.tmux/scripts/battery.sh) #[fg=colour7]| #[fg=brightgreen]%a %d - %H:%M'

# Info on left
set -g status-left-length 60

set -g status-left '#[fg=brightgreen]wl:#(sh ~/.tmux/scripts/wifi.sh)| '
